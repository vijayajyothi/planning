Successfully stopped Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Vcenter 2</field><field name=\"type\">Vcenter</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Vcenter</field><field name=\"name_text\">vf-vcd-vc-01.vmware.com</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000005002c38 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:427:in `_run__3337156785697834986__save__191507808034965685__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:100:in `block in vcenter_data_import'
/home/workspace/opsgps/app/models/vm.rb:86:in `vcenter_data_import'
/home/workspace/opsgps/app/models/vm.rb:62:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:427:in `_run__3337156785697834986__save__191507808034965685__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:100:in `block in vcenter_data_import'
/home/workspace/opsgps/app/models/vm.rb:86:in `vcenter_data_import'
/home/workspace/opsgps/app/models/vm.rb:62:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
Successfully started Solr ...
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000005444b48 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
