<<<<<<< HEAD
=======
Successfully stopped Solr ...
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 1</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000005bc80e0 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__155755889467769505__save__4028651341199986506__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__155755889467769505__save__4028651341199986506__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
Successfully started Solr ...
started
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006824f50 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 2</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x000000068dee50 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__800187997948286706__save__3738891064865782575__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__800187997948286706__save__3738891064865782575__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
Successfully stopped Solr ...
Successfully started Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000004641de8 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
Successfully stopped Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 3</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006dba9d8 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__4352200558670562865__save__1142094499307157177__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__4352200558670562865__save__1142094499307157177__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
Successfully started Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x000000063ecdc0 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Errno::ECONNRESET: Connection reset by peer
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__570081318216132246__save__4512067496576149352__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
Successfully stopped Solr ...
started
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
Successfully started Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000007c60550 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
Successfully stopped Solr ...
Successfully started Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x000000054b6838 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__1968437035057324427__save__2122376740109358788__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__1968437035057324427__save__2122376740109358788__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006266668 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Sunspot::Solr::Server::AlreadyRunningError: Server is already running with PID 26409
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/server.rb:62:in `start'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/tasks.rb:5:in `block (3 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:start
(See full trace by running task with --trace)
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
Successfully stopped Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006259378 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
EOFError: end of file reached
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__888984114912169956__save__1652971627751995378__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000005e9fca0 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3374981833360369487__save__2841975863808129320__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3374981833360369487__save__2841975863808129320__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
Successfully started Solr ...
Successfully stopped Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000007448598 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
Successfully stopped Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x000000050b2700 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3792797464361867661__save__3024990948321846424__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3792797464361867661__save__3024990948321846424__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
Successfully started Solr ...
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000007a821c0 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Sunspot::Solr::Server::NotRunningError: No PID file at /home/workspace/opsgps/solr/pids/production/sunspot-solr-production.pid
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/server.rb:127:in `stop'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/tasks.rb:16:in `block (3 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:stop
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
Successfully started Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x0000000555e7b8 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__4593571934570773427__save__1374062835289033036__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__4593571934570773427__save__1374062835289033036__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x000000060e12c0 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
rake aborted!
Sunspot::Solr::Server::AlreadyRunningError: Server is already running with PID 14819
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/server.rb:62:in `start'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/tasks.rb:5:in `block (3 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:start
(See full trace by running task with --trace)
Successfully stopped Solr ...
rake aborted!
Errno::ECONNRESET: Connection reset by peer
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3902760161377516647__save__1323722315529211786__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006f00900 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
Successfully started Solr ...
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000005048670 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__4514743868531486659__save__1697551530290179552__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__4514743868531486659__save__1697551530290179552__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
Successfully stopped Solr ...
started
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x000000071685f8 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Sunspot::Solr::Server::NotRunningError: No PID file at /home/workspace/opsgps/solr/pids/production/sunspot-solr-production.pid
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/server.rb:127:in `stop'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/tasks.rb:16:in `block (3 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:stop
(See full trace by running task with --trace)
Successfully started Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006b966e8 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__1087907135031100771__save__1037359163394255005__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__1087907135031100771__save__1037359163394255005__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x000000079048c0 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
Successfully stopped Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x000000054c1828 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__921306072792940638__save__195432892785776509__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__921306072792940638__save__195432892785776509__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
started
Successfully started Solr ...
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000007f1e5d0 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000005c2a768 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__1340133938273656019__save__4590794396245214241__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__1340133938273656019__save__4590794396245214241__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
started
Successfully stopped Solr ...
Successfully started Solr ...
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000002755600 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Successfully stopped Solr ...
Successfully started Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006077578 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3484127866242013129__save__3177127615255872067__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3484127866242013129__save__3177127615255872067__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000007b61730 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Sunspot::Solr::Server::AlreadyRunningError: Server is already running with PID 16348
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/server.rb:62:in `start'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/tasks.rb:5:in `block (3 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:start
(See full trace by running task with --trace)
Successfully stopped Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006d32308 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__4283046023738170362__save__2117476466160465155__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__4283046023738170362__save__2117476466160465155__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x000000038561c0 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000005fe1910 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__2514653845568065482__save__2754199130876896850__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__2514653845568065482__save__2754199130876896850__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
Successfully started Solr ...
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
Successfully stopped Solr ...
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006db61a8 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
rake aborted!
Sunspot::Solr::Server::NotRunningError: No PID file at /home/workspace/opsgps/solr/pids/production/sunspot-solr-production.pid
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/server.rb:127:in `stop'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/tasks.rb:16:in `block (3 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:stop
(See full trace by running task with --trace)
Successfully started Solr ...
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006e49688 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3294514553497386670__save__2350739804855110751__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3294514553497386670__save__2350739804855110751__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000006b80d48 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
rake aborted!
Sunspot::Solr::Server::AlreadyRunningError: Server is already running with PID 32290
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/server.rb:62:in `start'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_solr-2.1.1/lib/sunspot/solr/tasks.rb:5:in `block (3 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:start
(See full trace by running task with --trace)
Successfully stopped Solr ...
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x00000007d38ae0 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
rake aborted!
EOFError: end of file reached
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__2114770846976817568__save__4422856608763622732__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/home/workspace/opsgps/app/models/vm.rb:121:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
started
Successfully stopped Solr ...
Successfully started Solr ...
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><add><doc><field name=\"id\">Ovdc 4</field><field name=\"type\">Ovdc</field><field name=\"type\">ActiveRecord::Base</field><field name=\"class_name\">Ovdc</field><field name=\"org_text\">corpit-nonsdlc</field><field name=\"ovdc_text\">CorpIT-NonSDLC-MSSQL-PAYG1</field></doc></add>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x0000000614afe0 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3442868730553637202__save__2458590593422661249__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:102:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:107:in `add_documents'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:30:in `add'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:91:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:184:in `index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:387:in `solr_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:487:in `perform_index_tasks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:416:in `_run__3442868730553637202__save__2458590593422661249__callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/callbacks.rb:264:in `create_or_update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:84:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/validations.rb:50:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/attribute_methods/dirty.rb:22:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:259:in `block in save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:258:in `save'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:217:in `block in update_attributes'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:208:in `transaction'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activerecord-3.2.16/lib/active_record/persistence.rb:215:in `update_attributes'
/home/workspace/opsgps/app/models/vm.rb:99:in `block in import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:95:in `import_ovdcs'
/home/workspace/opsgps/app/models/vm.rb:66:in `importing_data'
/home/workspace/opsgps/lib/tasks/cron.rake:4:in `block in <top (required)>'
Tasks: TOP => cron
(See full trace by running task with --trace)
/home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `require': cannot load such file -- test_helper (LoadError)
	from /home/workspace/opsgps/test/functional/ovdcs_controller_test.rb:1:in `<top (required)>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `require'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `each'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `select'
	from /usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb:4:in `<main>'
started
rake aborted!
Errno::ECONNREFUSED: Connection refused - {:data=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:Application</query></delete>", :headers=>{"Content-Type"=>"text/xml"}, :method=>:post, :params=>{:wt=>:ruby}, :query=>"wt=ruby", :path=>"update", :uri=>#<URI::HTTP:0x000000067e9338 URL:http://localhost:8983/solr/default/update?wt=ruby>, :open_timeout=>nil, :read_timeout=>nil, :retry_503=>nil, :retry_after_limit=>nil}
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:19:in `rescue in execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:14:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Errno::ECONNREFUSED: Connection refused - connect(2) for "localhost" port 8983
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/connection.rb:15:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:182:in `execute'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:176:in `send_and_receive'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:16:in `block in send_and_receive_with_as_instrumentation'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `block in instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/activesupport-3.2.16/lib/active_support/notifications.rb:123:in `instrument'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/solr_instrumentation.rb:15:in `send_and_receive_with_as_instrumentation'
(eval):2:in `post'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:82:in `update'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rsolr-1.0.10/lib/rsolr/client.rb:146:in `delete_by_query'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/indexer.rb:58:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `block in remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session.rb:181:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot.rb:464:in `remove_all'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:183:in `solr_remove_all_from_index'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/searchable.rb:202:in `solr_reindex'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:57:in `block (4 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot-2.1.1/lib/sunspot/class_set.rb:16:in `each'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:56:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:68:in `with_session'
/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/sunspot_rails-2.1.1/lib/sunspot/rails/tasks.rb:19:in `block (2 levels) in <top (required)>'
Tasks: TOP => sunspot:solr:reindex => sunspot:reindex
(See full trace by running task with --trace)
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib" "/usr/local/rvm/gems/ruby-2.1.1@rails320/gems/rake-10.4.2/lib/rake/rake_test_loader.rb" "test/functional/**/*_test.rb" ]>
>>>>>>> c971f7d2935e346826ed30d2781ce59ad5ec30d5
