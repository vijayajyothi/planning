!function(t){"use strict";var e=t.tablesorter;t.extend({tablesorterPager:new function(){this.defaults={container:null,ajaxUrl:null,customAjaxUrl:function(t,e){return e},ajaxObject:{dataType:"json"},processAjaxOnInit:!0,ajaxProcessing:function(){return[0,[],null]},output:"{startRow} to {endRow} of {totalRows} rows",updateArrows:!0,page:0,pageReset:0,size:10,savePages:!0,storageKey:"tablesorter-pager",fixedHeight:!1,countChildRows:!1,removeRows:!1,cssFirst:".first",cssPrev:".prev",cssNext:".next",cssLast:".last",cssGoto:".gotoPage",cssPageDisplay:".pagedisplay",cssPageSize:".pagesize",cssErrorRow:"tablesorter-errorRow",cssDisabled:"disabled",totalRows:0,totalPages:0,filteredRows:0,filteredPages:0,ajaxCounter:0,currentFilters:[],startRow:0,endRow:0,$size:null,last:{}};var i=this,s=function(t,e){var i="addClass",s="removeClass",n=t.cssDisabled,o=!!e,a=o||0===t.page,r=Math.min(t.totalPages,t.filteredPages),l=o||t.page===r-1||0===r;t.updateArrows&&(t.$container.find(t.cssFirst+","+t.cssPrev)[a?i:s](n).attr("aria-disabled",a),t.$container.find(t.cssNext+","+t.cssLast)[l?i:s](n).attr("aria-disabled",l))},n=function(i,n,o){var a,r,l,h,c,d=i.config,u=d.$table.hasClass("hasFilters"),p=[],f=n.size||10;if(p=[d.widgetOptions&&d.widgetOptions.filter_filteredRow||"filtered",d.selectorRemove.replace(/^(\w+\.)/g,"")],n.countChildRows&&p.push(d.cssChildRow),c=new RegExp("("+p.join("|")+")"),u&&!n.ajaxUrl?t.isEmptyObject(d.cache)?n.filteredRows=n.totalRows=d.$tbodies.eq(0).children("tr").not(n.countChildRows?"":"."+d.cssChildRow).length:(n.filteredRows=0,t.each(d.cache[0].normalized,function(t,e){n.filteredRows+=n.regexRows.test(e[d.columns].$row[0].className)?0:1})):u||(n.filteredRows=n.totalRows),n.totalPages=Math.ceil(n.totalRows/f),d.totalRows=n.totalRows,d.filteredRows=n.filteredRows,n.filteredPages=Math.ceil(n.filteredRows/f)||0,Math.min(n.totalPages,n.filteredPages)>=0&&(p=n.size*n.page>n.filteredRows,n.startRow=p?1:0===n.filteredRows?0:n.size*n.page+1,n.page=p?0:n.page,n.endRow=Math.min(n.filteredRows,n.totalRows,n.size*(n.page+1)),h=n.$container.find(n.cssPageDisplay),l=(n.ajaxData&&n.ajaxData.output?n.ajaxData.output||n.output:n.output).replace(/\{page([\-+]\d+)?\}/gi,function(t,e){return n.totalPages?n.page+(e?parseInt(e,10):1):0}).replace(/\{\w+(\s*:\s*\w+)?\}/gi,function(t){var e,i,s=t.replace(/[{}\s]/g,""),o=s.split(":"),a=n.ajaxData,r=/(rows?|pages?)$/i.test(s)?0:"";return/(startRow|page)/.test(o[0])&&"input"===o[1]?(e=(""+("page"===o[0]?n.totalPages:n.totalRows)).length,i="page"===o[0]?n.page+1:n.startRow,'<input type="text" class="ts-'+o[0]+'" style="max-width:'+e+'em" value="'+i+'"/>'):o.length>1&&a&&a[o[0]]?a[o[0]][o[1]]:n[s]||(a?a[s]:r)||r}),h.length)){if(h["INPUT"===h[0].tagName?"val":"html"](l),n.$goto.length){for(p="",r=Math.min(n.totalPages,n.filteredPages),a=1;r>=a;a++)p+="<option>"+a+"</option>";n.$goto.html(p).val(n.page+1)}h.find(".ts-startRow, .ts-page").unbind("change").bind("change",function(){var e=t(this).val(),i=t(this).hasClass("ts-startRow")?Math.floor(e/n.size)+1:e;d.$table.trigger("pageSet.pager",[i])})}s(n),n.initialized&&o!==!1&&(d.$table.trigger("pagerComplete",n),n.savePages&&e.storage&&e.storage(i,n.storageKey,{page:n.page,size:n.size}))},o=function(e,i){var s,n,o=e.config,a=o.$tbodies.eq(0);i.fixedHeight&&(a.find("tr.pagerSavedHeightSpacer").remove(),n=t.data(e,"pagerSavedHeight"),n&&(s=n-a.height(),s>5&&t.data(e,"pagerLastSize")===i.size&&a.children("tr:visible").length<i.size&&a.append('<tr class="pagerSavedHeightSpacer '+o.selectorRemove.replace(/^(\w+\.)/g,"")+'" style="height:'+s+'px;"></tr>')))},a=function(e,i){var s=e.config.$tbodies.eq(0);s.find("tr.pagerSavedHeightSpacer").remove(),t.data(e,"pagerSavedHeight",s.height()),o(e,i),t.data(e,"pagerLastSize",i.size)},r=function(t,i){if(!i.ajaxUrl){var s,n=0,o=t.config,a=o.$tbodies.eq(0).children("tr"),r=a.length,l=i.page*i.size,h=l+i.size,c=o.widgetOptions&&o.widgetOptions.filter_filteredRow||"filtered",d=0;for(s=0;r>s;s++)a[s].className.match(c)||(d===l&&a[s].className.match(o.cssChildRow)?a[s].style.display="none":(a[s].style.display=d>=l&&h>d?"":"none",d+=a[s].className.match(o.cssChildRow+"|"+o.selectorRemove.replace(/^(\w+\.)/g,""))&&!i.countChildRows?0:1,d===h&&"none"!==a[s].style.display&&a[s].className.match(e.css.cssHasChild)&&(n=s)));if(n>0&&a[n].className.match(e.css.cssHasChild))for(;++n<r&&a[n].className.match(o.cssChildRow);)a[n].style.display=""}},l=function(e,i){i.size=parseInt(i.$size.val(),10)||i.size,t.data(e,"pagerLastSize",i.size),s(i),i.removeRows||(r(e,i),t(e).bind("sortEnd.pager filterEnd.pager",function(){r(e,i)}))},h=function(i,s,a,r,l){if("function"==typeof a.ajaxProcessing){var h,c,d,u,p,f,g,m,v,b,y=s.config,x=y.$table,w="",_=a.ajaxProcessing(i,s,r)||[0,[]],k=x.find("thead th").length;if(e.showError(s),l)y.debug&&e.log("Ajax Error",r,l),e.showError(s,0===r.status?"Not connected, verify Network":404===r.status?"Requested page not found [404]":500===r.status?"Internal Server Error [500]":"parsererror"===l?"Requested JSON parse failed":"timeout"===l?"Time out error":"abort"===l?"Ajax Request aborted":"Uncaught error: "+r.statusText+" ["+r.status+"]"),y.$tbodies.eq(0).children("tr").detach(),a.totalRows=0;else{if(t.isArray(_)?(f=isNaN(_[0])&&!isNaN(_[1]),b=_[f?1:0],a.totalRows=isNaN(b)?a.totalRows||0:b,y.totalRows=y.filteredRows=a.filteredRows=a.totalRows,m=0===a.totalRows?[""]:_[f?0:1]||[],g=_[2]):(a.ajaxData=_,y.totalRows=a.totalRows=_.total,y.filteredRows=a.filteredRows="undefined"!=typeof _.filteredRows?_.filteredRows:_.total,g=_.headers,m=_.rows),v=m&&m.length,m instanceof jQuery)a.processAjaxOnInit&&(y.$tbodies.eq(0).children("tr").detach(),y.$tbodies.eq(0).append(m));else if(v){for(h=0;v>h;h++){for(w+="<tr>",c=0;c<m[h].length;c++)w+=/^\s*<td/.test(m[h][c])?t.trim(m[h][c]):"<td>"+m[h][c]+"</td>";w+="</tr>"}a.processAjaxOnInit&&y.$tbodies.eq(0).html(w)}a.processAjaxOnInit=!0,g&&g.length===k&&(d=x.hasClass("hasStickyHeaders"),p=d?y.widgetOptions.$sticky.children("thead:first").children("tr").children():"",u=x.find("tfoot tr:first").children(),y.$headers.filter("th").each(function(i){var s,n=t(this);n.find("."+e.css.icon).length?(s=n.find("."+e.css.icon).clone(!0),n.find(".tablesorter-header-inner").html(g[i]).append(s),d&&p.length&&(s=p.eq(i).find("."+e.css.icon).clone(!0),p.eq(i).find(".tablesorter-header-inner").html(g[i]).append(s))):(n.find(".tablesorter-header-inner").html(g[i]),d&&p.length&&p.eq(i).find(".tablesorter-header-inner").html(g[i])),u.eq(i).html(g[i])}))}y.showProcessing&&e.isProcessing(s),a.totalPages=Math.ceil(a.totalRows/(a.size||10)),a.last.totalRows=a.totalRows,a.last.currentFilters=a.currentFilters,a.last.sortList=(y.sortList||[]).join(","),n(s,a),o(s,a),x.trigger("updateCache",[function(){a.initialized&&setTimeout(function(){x.trigger("applyWidgets").trigger("pagerChange",a)},0)}])}a.initialized||(a.initialized=!0,t(s).trigger("applyWidgets").trigger("pagerInitialized",a))},c=function(i,s){var n,o=d(i,s),a=t(document),r=i.config;""!==o&&(r.showProcessing&&e.isProcessing(i,!0),a.bind("ajaxError.pager",function(t,e,n,o){h(null,i,s,e,o),a.unbind("ajaxError.pager")}),n=++s.ajaxCounter,s.ajaxObject.url=o,s.ajaxObject.success=function(t,e,o){n<s.ajaxCounter||(h(t,i,s,o),a.unbind("ajaxError.pager"),"function"==typeof s.oldAjaxSuccess&&s.oldAjaxSuccess(t))},r.debug&&e.log("ajax initialized",s.ajaxObject),t.ajax(s.ajaxObject))},d=function(i,s){var n=i.config,o=s.ajaxUrl?s.ajaxUrl.replace(/\{page([\-+]\d+)?\}/,function(t,e){return s.page+(e?parseInt(e,10):0)}).replace(/\{size\}/g,s.size):"",a=n.sortList,r=s.currentFilters||t(i).data("lastSearch")||[],l=o.match(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/),h=o.match(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/),c=[];return l&&(l=l[1],t.each(a,function(t,e){c.push(l+"["+e[0]+"]="+e[1])}),o=o.replace(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/g,c.length?c.join("&"):l),c=[]),h&&(h=h[1],t.each(r,function(t,e){e&&c.push(h+"["+t+"]="+encodeURIComponent(e))}),o=o.replace(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/g,c.length?c.join("&"):h),s.currentFilters=r),"function"==typeof s.customAjaxUrl&&(o=s.customAjaxUrl(i,o)),n.debug&&e.log("Pager ajax url: "+o),o},u=function(i,s,a){var l,h,c,d,u=t(i),p=i.config,f=p.$table.hasClass("hasFilters"),g=s&&s.length||0,m=a.page*a.size,v=a.size;if(1>g)return void(p.debug&&e.log("Pager: no rows for pager to render"));if(a.page>=a.totalPages&&b(i,a),a.isDisabled=!1,a.initialized&&u.trigger("pagerChange",a),a.removeRows){for(e.clearTableBody(i),l=e.processTbody(i,p.$tbodies.eq(0),!0),h=f?0:m,c=f?0:m,d=0;v>d&&h<s.length;)f&&/filtered/.test(s[h][0].className)||(c++,c>m&&v>=d&&(d++,l.append(s[h]))),h++;e.processTbody(i,l,!1)}else r(i,a);n(i,a),a.isDisabled||o(i,a),u.trigger("applyWidgets"),i.isUpdating&&u.trigger("updateComplete",i)},p=function(i,n){n.ajax?s(n,!0):(n.isDisabled=!0,t.data(i,"pagerLastPage",n.page),t.data(i,"pagerLastSize",n.size),n.page=0,n.size=n.totalRows,n.totalPages=1,t(i).addClass("pagerDisabled").removeAttr("aria-describedby").find("tr.pagerSavedHeightSpacer").remove(),u(i,i.config.rowsCopy,n),i.config.debug&&e.log("pager disabled")),n.$size.add(n.$goto).add(n.$container.find(".ts-startRow, .ts-page")).each(function(){t(this).attr("aria-disabled","true").addClass(n.cssDisabled)[0].disabled=!0})},f=function(t){var e=t.config,i=e.pager;e.$table.trigger("updateCache",[function(){var s,n=[],o=t.config.cache[0].normalized;for(i.totalRows=o.length,s=0;s<i.totalRows;s++)n.push(o[s][e.columns].$row);e.rowsCopy=n,g(t,i,!0)}])},g=function(i,s,n){if(!s.isDisabled){var o=i.config,a=t(i),r=s.last,l=Math.min(s.totalPages,s.filteredPages);if(n!==!1&&s.initialized&&t.isEmptyObject(i.config.cache))return f(i);s.page<0&&(s.page=0),s.page>l-1&&0!==l&&(s.page=l-1),r.currentFilters=""===(r.currentFilters||[]).join("")?[]:r.currentFilters,s.currentFilters=""===(s.currentFilters||[]).join("")?[]:s.currentFilters,(r.page!==s.page||r.size!==s.size||r.totalRows!==s.totalRows||(r.currentFilters||[]).join(",")!==(s.currentFilters||[]).join(",")||r.sortList!==(o.sortList||[]).join(","))&&(o.debug&&e.log("Pager changing to page "+s.page),s.last={page:s.page,size:s.size,sortList:(o.sortList||[]).join(","),totalRows:s.totalRows,currentFilters:s.currentFilters||[]},s.ajax?c(i,s):s.ajax||u(i,o.rowsCopy,s),t.data(i,"pagerLastPage",s.page),s.initialized&&n!==!1&&(a.trigger("pageMoved",s).trigger("applyWidgets"),i.isUpdating&&a.trigger("updateComplete")))}},m=function(e,i,s){s.size=i||s.size||10,s.$size.val(s.size),t.data(e,"pagerLastPage",s.page),t.data(e,"pagerLastSize",s.size),s.totalPages=Math.ceil(s.totalRows/s.size),s.filteredPages=Math.ceil(s.filteredRows/s.size),g(e,s)},v=function(t,e){e.page=0,g(t,e)},b=function(t,e){e.page=Math.min(e.totalPages,e.filteredPages)-1,g(t,e)},y=function(t,e){e.page++,e.page>=Math.min(e.totalPages,e.filteredPages)-1&&(e.page=Math.min(e.totalPages,e.filteredPages)-1),g(t,e)},x=function(t,e){e.page--,e.page<=0&&(e.page=0),g(t,e)},w=function(i,s){p(i,s),s.$container.hide(),i.config.appender=null,s.initialized=!1,delete i.config.rowsCopy,t(i).unbind("destroy.pager sortEnd.pager filterEnd.pager enable.pager disable.pager"),e.storage&&e.storage(i,s.storageKey,"")},_=function(i,s,n){var a,r=i.config;s.$size.add(s.$goto).add(s.$container.find(".ts-startRow, .ts-page")).removeClass(s.cssDisabled).removeAttr("disabled").attr("aria-disabled","false"),s.isDisabled=!1,s.page=t.data(i,"pagerLastPage")||s.page||0,s.size=t.data(i,"pagerLastSize")||parseInt(s.$size.find("option[selected]").val(),10)||s.size||10,s.$size.val(s.size),s.totalPages=Math.ceil(Math.min(s.totalRows,s.filteredRows)/s.size),i.id&&(a=i.id+"_pager_info",s.$container.find(s.cssPageDisplay).attr("id",a),r.$table.attr("aria-describedby",a)),n&&(r.$table.trigger("updateRows"),m(i,s.size,s),l(i,s),o(i,s),r.debug&&e.log("pager enabled"))};i.appender=function(e,i){var s=e.config,o=s.pager;o.ajax||(s.rowsCopy=i,o.totalRows=o.countChildRows?s.$tbodies.eq(0).children("tr").length:i.length,o.size=t.data(e,"pagerLastSize")||o.size||10,o.totalPages=Math.ceil(o.totalRows/o.size),u(e,i,o),n(e,o,!1))},i.construct=function(s){return this.each(function(){if(this.config&&this.hasInitialized){var h,c,d,u=this,k=u.config,C=k.widgetOptions,T=k.pager=t.extend(!0,{},t.tablesorterPager.defaults,s),D=k.$table,S=T.$container=t(T.container).addClass("tablesorter-pager").show();k.debug&&e.log("Pager initializing"),T.oldAjaxSuccess=T.oldAjaxSuccess||T.ajaxObject.success,k.appender=i.appender,e.filter&&t.inArray("filter",k.widgets)>=0&&(T.currentFilters=k.$table.data("lastSearch")||e.filter.setDefaults(u,k,k.widgetOptions)||[],e.setFilters(u,T.currentFilters,!1)),T.savePages&&e.storage&&(h=e.storage(u,T.storageKey)||{},T.page=isNaN(h.page)?T.page:h.page,T.size=(isNaN(h.size)?T.size:h.size)||10,t.data(u,"pagerLastSize",T.size)),T.regexRows=new RegExp("("+(C.filter_filteredRow||"filtered")+"|"+k.selectorRemove.replace(/^(\w+\.)/g,"")+"|"+k.cssChildRow+")"),D.unbind("filterStart filterEnd sortEnd disable enable destroy update updateRows updateAll addRows pageSize ".split(" ").join(".pager ")).bind("filterStart.pager",function(t,e){T.currentFilters=e,T.pageReset!==!1&&(k.lastCombinedFilter||"")!==(e||[]).join("")&&(T.page=T.pageReset)}).bind("filterEnd.pager sortEnd.pager",function(){T.initialized&&(k.delayInit&&k.rowsCopy&&0===k.rowsCopy.length&&f(u),n(u,T,!1),g(u,T,!1),o(u,T))}).bind("disable.pager",function(t){t.stopPropagation(),p(u,T)}).bind("enable.pager",function(t){t.stopPropagation(),_(u,T,!0)}).bind("destroy.pager",function(t){t.stopPropagation(),w(u,T)}).bind("update updateRows updateAll addRows ".split(" ").join(".pager "),function(t){t.stopPropagation(),o(u,T);var e=k.$tbodies.eq(0).children("tr");T.totalRows=e.length-(T.countChildRows?0:e.filter("."+k.cssChildRow).length),T.totalPages=Math.ceil(T.totalRows/T.size),n(u,T),r(u,T)}).bind("pageSize.pager",function(t,e){t.stopPropagation(),m(u,parseInt(e,10)||10,T),r(u,T),n(u,T,!1),T.$size.length&&T.$size.val(T.size)}).bind("pageSet.pager",function(t,e){t.stopPropagation(),T.page=(parseInt(e,10)||1)-1,T.$goto.length&&T.$goto.val(T.size),g(u,T,!0),n(u,T,!1)}),c=[T.cssFirst,T.cssPrev,T.cssNext,T.cssLast],d=[v,x,y,b],S.find(c.join(",")).attr("tabindex",0).unbind("click.pager").bind("click.pager",function(e){e.stopPropagation();var i,s=t(this),n=c.length;if(!s.hasClass(T.cssDisabled))for(i=0;n>i;i++)if(s.is(c[i])){d[i](u,T);break}}),T.$goto=S.find(T.cssGoto),T.$goto.length&&T.$goto.unbind("change").bind("change",function(){T.page=t(this).val()-1,g(u,T,!0),n(u,T,!1)}),T.$size=S.find(T.cssPageSize),T.$size.length&&(T.$size.find("option").removeAttr("selected"),T.$size.unbind("change.pager").bind("change.pager",function(){return T.$size.val(t(this).val()),t(this).hasClass(T.cssDisabled)||(m(u,parseInt(t(this).val(),10),T),a(u,T)),!1})),T.initialized=!1,D.trigger("pagerBeforeInitialized",T),_(u,T,!1),"string"==typeof T.ajaxUrl?(T.ajax=!0,k.widgetOptions.filter_serversideFiltering=!0,k.serverSideSorting=!0,g(u,T)):(T.ajax=!1,t(this).trigger("appendCache",!0),l(u,T)),a(u,T),T.ajax||(T.initialized=!0,t(u).trigger("pagerInitialized",T))}})}}}),e.showError=function(e,i){t(e).each(function(){var e,s=this.config,n=s.pager&&s.pager.cssErrorRow||s.widgetOptions.pager_css&&s.widgetOptions.pager_css.errorRow||"tablesorter-errorRow";s&&("undefined"==typeof i?s.$table.find("thead").find(s.selectorRemove).remove():e=t(/tr\>/.test(i)?i:'<tr><td colspan="'+s.columns+'">'+i+"</td></tr>").click(function(){t(this).remove()}).appendTo(s.$table.find("thead:first")).addClass(n+" "+s.selectorRemove.replace(/^(\w+\.)/g,"")).attr({role:"alert","aria-live":"assertive"}))})},t.fn.extend({tablesorterPager:t.tablesorterPager.construct})}(jQuery);