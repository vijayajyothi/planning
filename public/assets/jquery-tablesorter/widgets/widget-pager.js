!function(t){"use strict";var e,i=t.tablesorter;i.addWidget({id:"pager",priority:55,options:{pager_output:"{startRow} to {endRow} of {totalRows} rows",pager_updateArrows:!0,pager_startPage:0,pager_pageReset:0,pager_size:10,pager_savePages:!0,pager_storageKey:"tablesorter-pager",pager_fixedHeight:!1,pager_countChildRows:!1,pager_removeRows:!1,pager_ajaxUrl:null,pager_customAjaxUrl:function(t,e){return e},pager_ajaxObject:{dataType:"json"},pager_processAjaxOnInit:!0,pager_ajaxProcessing:function(){return[0,[],null]},pager_css:{container:"tablesorter-pager",errorRow:"tablesorter-errorRow",disabled:"disabled"},pager_selectors:{container:".pager",first:".first",prev:".prev",next:".next",last:".last",gotoPage:".gotoPage",pageDisplay:".pagedisplay",pageSize:".pagesize"}},init:function(t){e.init(t)},format:function(t,i){return i.pager&&i.pager.initialized?void e.moveToPage(t,i.pager,!1):e.initComplete(t,i)},remove:function(t,i){e.destroyPager(t,i)}}),e=i.pager={init:function(s){if(!s.hasInitialized||!s.config.pager.initialized){var n,r=s.config,a=r.widgetOptions,o=a.pager_selectors,l=r.pager=t.extend({totalPages:0,filteredRows:0,filteredPages:0,currentFilters:[],page:a.pager_startPage,startRow:0,endRow:0,ajaxCounter:0,$size:null,last:{}},r.pager);l.isInitializing||(l.isInitializing=!0,r.debug&&i.log("Pager initializing"),l.size=t.data(s,"pagerLastSize")||a.pager_size,l.$container=t(o.container).addClass(a.pager_css.container).show(),l.$goto=l.$container.find(o.gotoPage),l.$size=l.$container.find(o.pageSize),l.totalRows=r.$tbodies.eq(0).children("tr").not(r.widgetOptions.pager_countChildRows?"":"."+r.cssChildRow).length,l.oldAjaxSuccess=l.oldAjaxSuccess||a.pager_ajaxObject.success,r.appender=e.appender,i.filter&&t.inArray("filter",r.widgets)>=0&&(l.currentFilters=r.$table.data("lastSearch")||i.filter.setDefaults(s,r,a)||[],i.setFilters(s,l.currentFilters,!1)),a.pager_savePages&&i.storage&&(n=i.storage(s,a.pager_storageKey)||{},l.page=isNaN(n.page)?l.page:n.page,l.size=(isNaN(n.size)?l.size:n.size)||10,t.data(s,"pagerLastSize",l.size)),l.regexRows=new RegExp("("+(a.filter_filteredRow||"filtered")+"|"+r.selectorRemove.replace(/^(\w+\.)/g,"")+"|"+r.cssChildRow+")"),l.initialized=!1,r.$table.trigger("pagerBeforeInitialized",r),e.enablePager(s,r,!1),"string"==typeof a.pager_ajaxUrl?(l.ajax=!0,a.filter_serversideFiltering=!0,r.serverSideSorting=!0,e.moveToPage(s,l)):(l.ajax=!1,r.$table.trigger("appendCache",[{},!0]),e.hideRowsSetup(s,r)))}},initComplete:function(t,i){var s=i.pager;e.changeHeight(t,i),e.bindEvents(t,i),e.setPageSize(t,0,i),s.initialized=!0,s.isInitializing=!1,i.$table.trigger("pagerInitialized",i),e.updatePageDisplay(t,i)},bindEvents:function(i,s){var n,r,a=s.pager,o=s.widgetOptions,l=o.pager_selectors;s.$table.unbind("filterStart filterEnd sortEnd disable enable destroy update updateRows updateAll addRows pageSize ".split(" ").join(".pager ")).bind("filterStart.pager",function(t,e){a.currentFilters=e,o.pager_pageReset!==!1&&(s.lastCombinedFilter||"")!==(e||[]).join("")&&(a.page=o.pager_pageReset)}).bind("filterEnd.pager sortEnd.pager",function(){a.initialized&&(s.delayInit&&s.rowsCopy&&0===s.rowsCopy.length&&e.updateCache(i),e.updatePageDisplay(i,s,!1),e.moveToPage(i,a,!1),e.fixHeight(i,s))}).bind("disable.pager",function(t){t.stopPropagation(),e.showAllRows(i,s)}).on("enable.pager",function(t){t.stopPropagation(),e.enablePager(i,s,!0)}).on("destroy.pager",function(t){t.stopPropagation(),e.destroyPager(i,s)}).on("update updateRows updateAll addRows ".split(" ").join(".pager "),function(t){t.stopPropagation(),e.fixHeight(i,s);var n=s.$tbodies.eq(0).children("tr");a.totalRows=n.length-(s.widgetOptions.pager_countChildRows?0:n.filter("."+s.cssChildRow).length),a.totalPages=Math.ceil(a.totalRows/a.size),e.updatePageDisplay(i,s),e.hideRows(i,s),s.$table.trigger("applyWidgets")}).on("pageSize.pager",function(t,n){t.stopPropagation(),e.setPageSize(i,parseInt(n,10)||10,s),e.hideRows(i,s),e.updatePageDisplay(i,s,!1),a.$size.length&&a.$size.val(a.size)}).on("pageSet.pager",function(t,n){t.stopPropagation(),a.page=(parseInt(n,10)||1)-1,a.$goto.length&&a.$goto.val(s.size),e.moveToPage(i,a,!0),e.updatePageDisplay(i,s,!1)}),n=[l.first,l.prev,l.next,l.last],r=["moveToFirstPage","moveToPrevPage","moveToNextPage","moveToLastPage"],a.$container.find(n.join(",")).attr("tabindex",0).unbind("click.pager").bind("click.pager",function(s){s.stopPropagation();var l,h=t(this),c=n.length;if(!h.hasClass(o.pager_css.disabled))for(l=0;c>l;l++)if(h.is(n[l])){e[r[l]](i,a);break}}),a.$goto.length&&a.$goto.unbind("change").bind("change",function(){a.page=t(this).val()-1,e.moveToPage(i,a,!0),e.updatePageDisplay(i,s,!1)}),a.$size.length&&(a.$size.find("option").removeAttr("selected"),a.$size.unbind("change.pager").bind("change.pager",function(){return a.$size.val(t(this).val()),t(this).hasClass(o.pager_css.disabled)||(e.setPageSize(i,parseInt(t(this).val(),10),s),e.changeHeight(i,s)),!1}))},pagerArrows:function(t,e){var i=t.pager,s=!!e,n=s||0===i.page,r=Math.min(i.totalPages,i.filteredPages),a=s||i.page===r-1||0===r,o=t.widgetOptions,l=o.pager_selectors;o.pager_updateArrows&&(i.$container.find(l.first+","+l.prev).toggleClass(o.pager_css.disabled,n).attr("aria-disabled",n),i.$container.find(l.next+","+l.last).toggleClass(o.pager_css.disabled,a).attr("aria-disabled",a))},updatePageDisplay:function(s,n,r){var a,o,l,h,c,d=n.widgetOptions,u=n.pager,p=n.$table.hasClass("hasFilters"),f=[],g=u.size||10;if(f=[d&&d.filter_filteredRow||"filtered",n.selectorRemove.replace(/^(\w+\.)/g,"")],d.pager_countChildRows&&f.push(n.cssChildRow),c=new RegExp("("+f.join("|")+")"),u.$size.add(u.$goto).removeClass(d.pager_css.disabled).removeAttr("disabled").attr("aria-disabled","false"),p&&!d.pager_ajaxUrl?t.isEmptyObject(n.cache)?u.filteredRows=u.totalRows=n.$tbodies.eq(0).children("tr").not(n.widgetOptions.pager_countChildRows?"":"."+n.cssChildRow).length:(u.filteredRows=0,t.each(n.cache[0].normalized,function(t,e){u.filteredRows+=u.regexRows.test(e[n.columns].$row[0].className)?0:1})):p||(u.filteredRows=u.totalRows),u.totalPages=Math.ceil(u.totalRows/g),n.totalRows=u.totalRows,n.filteredRows=u.filteredRows,u.filteredPages=Math.ceil(u.filteredRows/g)||0,Math.min(u.totalPages,u.filteredPages)>=0&&(f=u.size*u.page>u.filteredRows,u.startRow=f?1:0===u.filteredRows?0:u.size*u.page+1,u.page=f?0:u.page,u.endRow=Math.min(u.filteredRows,u.totalRows,u.size*(u.page+1)),h=u.$container.find(d.pager_selectors.pageDisplay),l=(u.ajaxData&&u.ajaxData.output?u.ajaxData.output||d.pager_output:d.pager_output).replace(/\{page([\-+]\d+)?\}/gi,function(t,e){return u.totalPages?u.page+(e?parseInt(e,10):1):0}).replace(/\{\w+(\s*:\s*\w+)?\}/gi,function(t){var e,i,s=t.replace(/[{}\s]/g,""),n=s.split(":"),r=u.ajaxData,a=/(rows?|pages?)$/i.test(s)?0:"";return/(startRow|page)/.test(n[0])&&"input"===n[1]?(e=(""+("page"===n[0]?u.totalPages:u.totalRows)).length,i="page"===n[0]?u.page+1:u.startRow,'<input type="text" class="ts-'+n[0]+'" style="max-width:'+e+'em" value="'+i+'"/>'):n.length>1&&r&&r[n[0]]?r[n[0]][n[1]]:u[s]||(r?r[s]:a)||a}),h.length)){if(h["INPUT"===h[0].tagName?"val":"html"](l),u.$goto.length){for(f="",o=Math.min(u.totalPages,u.filteredPages),a=1;o>=a;a++)f+="<option>"+a+"</option>";u.$goto.html(f).val(u.page+1)}h.find(".ts-startRow, .ts-page").unbind("change").bind("change",function(){var e=t(this).val(),i=t(this).hasClass("ts-startRow")?Math.floor(e/u.size)+1:e;n.$table.trigger("pageSet.pager",[i])})}e.pagerArrows(n),u.initialized&&r!==!1&&(n.$table.trigger("pagerComplete",n),d.pager_savePages&&i.storage&&i.storage(s,d.pager_storageKey,{page:u.page,size:u.size}))},fixHeight:function(e,i){var s,n,r=i.pager,a=i.widgetOptions,o=i.$tbodies.eq(0);a.pager_fixedHeight&&(o.find("tr.pagerSavedHeightSpacer").remove(),n=t.data(e,"pagerSavedHeight"),n&&(s=n-o.height(),s>5&&t.data(e,"pagerLastSize")===r.size&&o.children("tr:visible").length<r.size&&o.append('<tr class="pagerSavedHeightSpacer '+a.pager_selectors.remove.replace(/^(\w+\.)/g,"")+'" style="height:'+s+'px;"></tr>')))},changeHeight:function(i,s){var n=s.$tbodies.eq(0);n.find("tr.pagerSavedHeightSpacer").remove(),t.data(i,"pagerSavedHeight",n.height()),e.fixHeight(i,s),t.data(i,"pagerLastSize",s.pager.size)},hideRows:function(t,e){if(!e.widgetOptions.pager_ajaxUrl){var s,n=0,r=e.pager,a=e.widgetOptions,o=e.$tbodies.eq(0).children("tr"),l=o.length,h=r.page*r.size,c=h+r.size,d=a&&a.filter_filteredRow||"filtered",u=0;for(s=0;l>s;s++)o[s].className.match(d)||(u===h&&o[s].className.match(e.cssChildRow)?o[s].style.display="none":(o[s].style.display=u>=h&&c>u?"":"none",u+=o[s].className.match(e.cssChildRow+"|"+e.selectorRemove.replace(/^(\w+\.)/g,""))&&!a.pager_countChildRows?0:1,u===c&&"none"!==o[s].style.display&&o[s].className.match(i.css.cssHasChild)&&(n=s)));if(n>0&&o[n].className.match(i.css.cssHasChild))for(;++n<l&&o[n].className.match(e.cssChildRow);)o[n].style.display=""}},hideRowsSetup:function(i,s){var n=s.pager;n.size=parseInt(n.$size.val(),10)||n.size,t.data(i,"pagerLastSize",n.size),e.pagerArrows(s),s.widgetOptions.pager_removeRows||(e.hideRows(i,s),s.$table.on("sortEnd.pager filterEnd.pager",function(){e.hideRows(i,s)}))},renderAjax:function(s,n,r,a,o){var l=r.pager,h=r.widgetOptions;if(t.isFunction(h.pager_ajaxProcessing)){var c,d,u,p,f,g,m,v,b,y,w=r.$table,x="",_=h.pager_ajaxProcessing(s,n,a)||[0,[]],C=w.find("thead th").length;if(i.showError(n),o)r.debug&&i.log("Ajax Error",a,o),i.showError(n,o.message+" ("+a.status+")"),r.$tbodies.eq(0).children("tr").detach(),l.totalRows=0;else{if(t.isArray(_)?(u=isNaN(_[0])&&!isNaN(_[1]),y=_[u?1:0],l.totalRows=isNaN(y)?l.totalRows||0:y,r.totalRows=r.filteredRows=l.filteredRows=l.totalRows,v=0===l.totalRows?[""]:_[u?0:1]||[],m=_[2]):(l.ajaxData=_,r.totalRows=l.totalRows=_.total,r.filteredRows=l.filteredRows="undefined"!=typeof _.filteredRows?_.filteredRows:_.total,m=_.headers,v=_.rows),b=v&&v.length,v instanceof jQuery)h.pager_processAjaxOnInit&&(r.$tbodies.eq(0).children("tr").detach(),r.$tbodies.eq(0).append(v));else if(b){for(c=0;b>c;c++){for(x+="<tr>",d=0;d<v[c].length;d++)x+=/^\s*<td/.test(v[c][d])?t.trim(v[c][d]):"<td>"+v[c][d]+"</td>";x+="</tr>"}h.pager_processAjaxOnInit&&r.$tbodies.eq(0).html(x)}h.pager_processAjaxOnInit=!0,m&&m.length===C&&(p=w.hasClass("hasStickyHeaders"),g=p?h.$sticky.children("thead:first").children("tr").children():"",f=w.find("tfoot tr:first").children(),r.$headers.filter("th").each(function(e){var s,n=t(this);n.find("."+i.css.icon).length?(s=n.find("."+i.css.icon).clone(!0),n.find(".tablesorter-header-inner").html(m[e]).append(s),p&&g.length&&(s=g.eq(e).find("."+i.css.icon).clone(!0),g.eq(e).find(".tablesorter-header-inner").html(m[e]).append(s))):(n.find(".tablesorter-header-inner").html(m[e]),p&&g.length&&g.eq(e).find(".tablesorter-header-inner").html(m[e])),f.eq(e).html(m[e])}))}r.showProcessing&&i.isProcessing(n),l.totalPages=Math.ceil(l.totalRows/(l.size||10)),l.last.totalRows=l.totalRows,l.last.currentFilters=l.currentFilters,l.last.sortList=(r.sortList||[]).join(","),e.updatePageDisplay(n,r),e.fixHeight(n,r),w.trigger("updateCache",[function(){l.initialized&&setTimeout(function(){w.trigger("applyWidgets").trigger("pagerChange",l)},0)}])}l.initialized||r.$table.trigger("applyWidgets")},getAjax:function(s,n){var r,a=e.getAjaxUrl(s,n),o=t(document),l=n.widgetOptions,h=n.pager;""!==a&&(n.showProcessing&&i.isProcessing(s,!0),o.on("ajaxError.pager",function(t,i,r,a){e.renderAjax(null,s,n,i,a),o.unbind("ajaxError.pager")}),r=++h.ajaxCounter,l.pager_ajaxObject.url=a,l.pager_ajaxObject.success=function(t,i,a){r<h.ajaxCounter||(e.renderAjax(t,s,n,a),o.unbind("ajaxError.pager"),"function"==typeof h.oldAjaxSuccess&&h.oldAjaxSuccess(t))},n.debug&&i.log("ajax initialized",l.pager_ajaxObject),t.ajax(l.pager_ajaxObject))},getAjaxUrl:function(e,s){var n=s.pager,r=s.widgetOptions,a=r.pager_ajaxUrl?r.pager_ajaxUrl.replace(/\{page([\-+]\d+)?\}/,function(t,e){return n.page+(e?parseInt(e,10):0)}).replace(/\{size\}/g,n.size):"",o=s.sortList,l=n.currentFilters||t(e).data("lastSearch")||[],h=a.match(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/),c=a.match(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/),d=[];return h&&(h=h[1],t.each(o,function(t,e){d.push(h+"["+e[0]+"]="+e[1])}),a=a.replace(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/g,d.length?d.join("&"):h),d=[]),c&&(c=c[1],t.each(l,function(t,e){e&&d.push(c+"["+t+"]="+encodeURIComponent(e))}),a=a.replace(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/g,d.length?d.join("&"):c),n.currentFilters=l),t.isFunction(r.pager_customAjaxUrl)&&(a=r.pager_customAjaxUrl(e,a)),s.debug&&i.log("Pager ajax url: "+a),a},renderTable:function(t,s){var n,r,a,o,l=t.config,h=l.pager,c=l.widgetOptions,d=l.$table.hasClass("hasFilters"),u=s&&s.length||0,p=h.page*h.size,f=h.size;if(1>u)return void(l.debug&&i.log("Pager: no rows for pager to render"));if(h.page>=h.totalPages)return e.moveToLastPage(t,h);if(h.isDisabled=!1,h.initialized&&l.$table.trigger("pagerChange",l),c.pager_removeRows){for(i.clearTableBody(t),n=i.processTbody(t,l.$tbodies.eq(0),!0),r=d?0:p,a=d?0:p,o=0;f>o&&r<s.length;)d&&/filtered/.test(s[r][0].className)||(a++,a>p&&f>=o&&(o++,n.append(s[r]))),r++;i.processTbody(t,n,!1)}else e.hideRows(t,l);e.updatePageDisplay(t,l),h.isDisabled||e.fixHeight(t,l),c.pager_startPage=h.page,c.pager_size=h.size,l.$table.trigger("applyWidgets"),t.isUpdating&&l.$table.trigger("updateComplete")},showAllRows:function(s,n){var r=n.pager,a=n.widgetOptions;r.ajax?e.pagerArrows(n,!0):(r.isDisabled=!0,t.data(s,"pagerLastPage",r.page),t.data(s,"pagerLastSize",r.size),r.page=0,r.size=r.totalRows,r.totalPages=1,n.$table.addClass("pagerDisabled").removeAttr("aria-describedby").find("tr.pagerSavedHeightSpacer").remove(),e.renderTable(s,n.rowsCopy),n.debug&&i.log("pager disabled")),r.$size.add(r.$goto).each(function(){t(this).attr("aria-disabled","true").addClass(a.pager_css.disabled)[0].disabled=!0})},updateCache:function(i){var s=i.config,n=s.pager;s.$table.trigger("updateCache",[function(){if(!t.isEmptyObject(i.config.cache)){var r,a=[],o=i.config.cache[0].normalized;for(n.totalRows=o.length,r=0;r<n.totalRows;r++)a.push(o[r][s.columns].$row);s.rowsCopy=a,e.moveToPage(i,n,!0),n.last.currentFilters=[" "]}}])},moveToPage:function(s,n,r){if(!n.isDisabled){if(r!==!1&&n.initialized&&t.isEmptyObject(s.config.cache))return e.updateCache(s);var a=s.config,o=n.last,l=Math.min(n.totalPages,n.filteredPages);n.page<0&&(n.page=0),n.page>l-1&&0!==l&&(n.page=l-1),o.currentFilters=""===(o.currentFilters||[]).join("")?[]:o.currentFilters,n.currentFilters=""===(n.currentFilters||[]).join("")?[]:n.currentFilters,(o.page!==n.page||o.size!==n.size||o.totalRows!==n.totalRows||(o.currentFilters||[]).join(",")!==(n.currentFilters||[]).join(",")||o.sortList!==(a.sortList||[]).join(","))&&(a.debug&&i.log("Pager changing to page "+n.page),n.last={page:n.page,size:n.size,sortList:(a.sortList||[]).join(","),totalRows:n.totalRows,currentFilters:n.currentFilters||[]},n.ajax?e.getAjax(s,a):n.ajax||e.renderTable(s,a.rowsCopy),t.data(s,"pagerLastPage",n.page),n.initialized&&r!==!1&&(a.$table.trigger("pageMoved",a),!n.ajax&&s.isUpdating&&a.$table.trigger("updateComplete")))}},setPageSize:function(i,s,n){var r=n.pager;r.size=s||r.size||10,r.$size.val(r.size),t.data(i,"pagerLastPage",r.page),t.data(i,"pagerLastSize",r.size),r.totalPages=Math.ceil(r.totalRows/r.size),r.filteredPages=Math.ceil(r.filteredRows/r.size),e.moveToPage(i,r,!0)},moveToFirstPage:function(t,i){i.page=0,e.moveToPage(t,i,!0)},moveToLastPage:function(t,i){i.page=Math.min(i.totalPages,i.filteredPages)-1,e.moveToPage(t,i,!0)},moveToNextPage:function(t,i){i.page++,i.page>=Math.min(i.totalPages,i.filteredPages)-1&&(i.page=Math.min(i.totalPages,i.filteredPages)-1),e.moveToPage(t,i,!0)},moveToPrevPage:function(t,i){i.page--,i.page<=0&&(i.page=0),e.moveToPage(t,i,!0)},destroyPager:function(t,s){var n=s.pager;e.showAllRows(t,s),n.$container.hide(),s.appender=null,n.initialized=!1,delete t.config.rowsCopy,s.$table.unbind("destroy.pager sortEnd.pager filterEnd.pager enable.pager disable.pager"),i.storage&&i.storage(t,s.widgetOptions.pager_storageKey,"")},enablePager:function(s,n,r){var a,o=n.pager;o.isDisabled=!1,o.page=t.data(s,"pagerLastPage")||o.page||0,o.size=t.data(s,"pagerLastSize")||parseInt(o.$size.find("option[selected]").val(),10)||o.size||10,o.$size.val(o.size),o.totalPages=Math.ceil(Math.min(o.totalRows,o.filteredRows)/o.size),n.$table.removeClass("pagerDisabled"),s.id&&(a=s.id+"_pager_info",o.$container.find(n.widgetOptions.pager_selectors.pageDisplay).attr("id",a),n.$table.attr("aria-describedby",a)),r&&(n.$table.trigger("updateRows"),e.setPageSize(s,o.size,n),e.hideRowsSetup(s,n),e.fixHeight(s,n),n.debug&&i.log("pager enabled"))},appender:function(i,s){var n=i.config,r=n.widgetOptions,a=n.pager;a.ajax?e.moveToPage(i,a,!0):(n.rowsCopy=s,a.totalRows=n.widgetOptions.pager_countChildRows?n.$tbodies.eq(0).children("tr").length:s.length,a.size=t.data(i,"pagerLastSize")||a.size||r.pager_size||10,a.totalPages=Math.ceil(a.totalRows/a.size),e.moveToPage(i,a),e.updatePageDisplay(i,n,!1))}},i.showError=function(e,i){t(e).each(function(){var e,s=this.config,n=s.pager&&s.pager.cssErrorRow||s.widgetOptions.pager_css&&s.widgetOptions.pager_css.errorRow||"tablesorter-errorRow";s&&("undefined"==typeof i?s.$table.find("thead").find(s.selectorRemove).remove():e=t(/tr\>/.test(i)?i:'<tr><td colspan="'+s.columns+'">'+i+"</td></tr>").click(function(){t(this).remove()}).appendTo(s.$table.find("thead:first")).addClass(n+" "+s.selectorRemove.replace(/^(\w+\.)/g,"")).attr({role:"alert","aria-live":"assertive"}))})}}(jQuery);