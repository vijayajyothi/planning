!function(t){"use strict";var e=t.tablesorter;e.alignChar={init:function(i,s,n){s.$headers.filter("["+n.alignChar_charAttrib+"]").each(function(){var r=t(this),a={column:this.column,align:r.attr(n.alignChar_charAttrib),alignIndex:parseInt(r.attr(n.alignChar_indexAttrib)||0,10),adjust:parseFloat(r.attr(n.alignChar_adjustAttrib))||0};a.regex=new RegExp("\\"+a.align,"g"),"undefined"!=typeof a.align&&(n.alignChar_savedVars[this.column]=a,e.alignChar.setup(i,s,n,a))})},setup:function(e,i,s,n){if(!t.isEmptyObject(i.cache)){var r,a,o,l,h,c,d,u,p,f,g,m,v,b,y=[],x=[];for(r=0;r<i.$tbodies.length;r++)for(d=i.cache[r],f=d.normalized.length,a=0;f>a;a++){if(b=d.row?d.row[a]:d.normalized[a][i.columns].$row,u=b.find("td").eq(n.column).text().replace(/[ ]/g,"\xa0"),p=(u.match(n.regex)||[]).length,p>0&&n.alignIndex>0)for(l=Math.min(n.alignIndex,p),o=0,c=0,h=0;o++<l;)h=u.indexOf(n.align,h+1),c=0>h?c:h;else c=u.indexOf(n.align);c>=0?(y.push(u.substring(0,c)||""),x.push(u.substring(c,u.length)||"")):(y.push(p>=1&&n.alignIndex>=p?"":u||""),x.push(p>=1&&n.alignIndex>=p?u||"":""))}for(g=t.extend([],y).sort(function(t,e){return e.length-t.length})[0],m=t.extend([],x).sort(function(t,e){return e.length-t.length})[0],n.width=n.width||Math.floor(g.length/(g.length+m.length)*100)+n.adjust,g="min-width:"+n.width+"%",m="min-width:"+(100-n.width)+"%",r=0;r<i.$tbodies.length;r++)for(d=i.cache[r],f=d.normalized.length,a=0;f>a;a++)v=t(s.alignChar_wrap).length?t(s.alignChar_wrap).html(n.align)[0].outerHTML:n.align,b=d.row?d.row[a]:d.normalized[a][i.columns].$row,b.find("td").eq(n.column).html('<span class="ts-align-wrap"><span class="ts-align-left" style="'+g+'">'+y[a]+'</span><span class="ts-align-right" style="'+m+'">'+v+x[a].slice(n.align.length)+"</span></span>");s.alignChar_initialized=!0}},remove:function(e,i,s){if(!t.isEmptyObject(i.cache)){var n,r,a,o,l,h;for(n=0;n<i.$tbodies.length;n++)for(o=i.cache[n],a=o.normalized.length,r=0;a>r;r++)l=o.row?o.row[r]:o.normalized[r][i.columns].$row,h=l.find("td").eq(s),h.html(h.text().replace(/\s/g," "))}}},e.addWidget({id:"alignChar",priority:100,options:{alignChar_wrap:"",alignChar_charAttrib:"data-align-char",alignChar_indexAttrib:"data-align-index",alignChar_adjustAttrib:"data-align-adjust"},init:function(t,i,s,n){n.alignChar_initialized=!1,n.alignChar_savedVars=[],e.alignChar.init(t,s,n),s.$table.on("pagerEnd refreshAlign",function(){s.$headers.filter("["+n.alignChar_charAttrib+"]").each(function(){e.alignChar.remove(t,s,this.column)}),e.alignChar.init(t,s,n)})},format:function(t,e,i){i.alignChar_initialized||e.$table.trigger("refreshAlign")},remove:function(t,i,s){i.$headers.filter("["+s.alignChar_charAttrib+"]").each(function(){e.alignChar.remove(t,i,this.column)}),s.alignChar_initialized=!1}})}(jQuery);