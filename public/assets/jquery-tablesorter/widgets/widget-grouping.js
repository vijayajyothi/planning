!function(t){"use strict";var e=t.tablesorter;e.grouping={types:{number:function(t,i,s,n,r){var o,a;return n>1&&""!==s?i.hasClass(e.css.sortAsc)?(o=Math.floor(parseFloat(s)/n)*n,o>parseFloat(r||0)?o:parseFloat(r||0)):(o=Math.ceil(parseFloat(s)/n)*n,o<parseFloat(r||n)-o?parseFloat(r||n)-o:o):(a=(s+"").match(/\d+/g),a&&a.length>=n?a[n-1]:s||"")},separator:function(e,i,s,n){var r=(s+"").split(e.widgetOptions.group_separator);return t.trim(r&&n>0&&r.length>=n?r[(n||1)-1]:"")},word:function(t,e,i,s){var n=(i+" ").match(/\w+/g);return n&&n.length>=s?n[s-1]:i||""},letter:function(t,e,i,s){return i?(i+" ").substring(0,s):""},date:function(t,e,i,s){var n=t.widgetOptions,r=new Date(i||""),o=r.getHours();return"year"===s?r.getFullYear():"month"===s?n.group_months[r.getMonth()]:"day"===s?n.group_months[r.getMonth()]+" "+r.getDate():"week"===s?n.group_week[r.getDay()]:"time"===s?("00"+(o>12?o-12:0===o?o+12:o)).slice(-2)+":"+("00"+r.getMinutes()).slice(-2)+" "+("00"+n.group_time[o>=12?1:0]).slice(-2):n.group_dateString(r)}},update:function(i,s,n){if(!t.isEmptyObject(s.cache)){var r,o,a,l,h,c,d,u,p,f,g=n.grouping_language,m="",v=!1,b=s.sortList[0]?s.sortList[0][0]:-1;if(s.$table.find("tr.group-hidden").removeClass("group-hidden").end().find("tr.group-header").remove(),n.group_collapsible&&s.$table.data("pagerSavedHeight",0),b>=0&&!s.$headers.filter('[data-column="'+b+'"]:last').hasClass("group-false")){for(s.debug&&(d=new Date),n.group_currentGroup="",n.group_currentGroups={},h=(s.$headers.filter('[data-column="'+b+'"]:last').attr("class")||"").match(/(group-\w+(-\w+)?)/g),c=h?h[0].split("-"):["group","letter",1],n.group_collapsible&&n.group_saveGroups&&e.storage&&(n.group_currentGroups=e.storage(i,"tablesorter-groups")||{},f="number"===c[1]&&c[2]>1?"dir"+s.sortList[0][1]:"",p=n.group_currentGroup=""+b+f+c.join(""),n.group_currentGroups[p]?v=!0:n.group_currentGroups[p]=[]),o=0;o<s.$tbodies.length;o++)for(u=s.cache[o].normalized,m="",l=s.$tbodies.eq(o).children("tr").not("."+s.cssChildRow),r=0;r<l.length;r++)l.eq(r).is(":visible")&&e.grouping.types[c[1]]&&(a=u[r]?e.grouping.types[c[1]](s,s.$headers.filter('[data-column="'+b+'"]:last'),u[r][b],/date/.test(h)?c[2]:parseInt(c[2]||1,10)||1,m,g):a,m!==a&&(m=a,"number"===c[1]&&c[2]>1&&""!==a&&(a+=" - "+(parseInt(a,10)+(parseInt(c[2],10)-1)*(s.$headers.filter('[data-column="'+b+'"]:last').hasClass(e.css.sortAsc)?1:-1))),t.isFunction(n.group_formatter)&&(a=n.group_formatter((a||"").toString(),b,i,s,n)||a),l.eq(r).before('<tr class="group-header '+s.selectorRemove.slice(1)+'" unselectable="on"><td colspan="'+s.columns+'">'+(n.group_collapsible?"<i/>":"")+'<span class="group-name">'+a+'</span><span class="group-count"></span></td></tr>'),n.group_saveGroups&&!v&&n.group_collapsed&&n.group_collapsible&&n.group_currentGroups[n.group_currentGroup].push(a)));s.$table.find("tr.group-header").bind("selectstart",!1).each(function(){var e,s,r,o=t(this),a=o.nextUntil("tr.group-header").filter(":visible");(n.group_count||t.isFunction(n.group_callback))&&(s=o.find(".group-count"),s.length&&(n.group_count&&s.html(n.group_count.replace(/\{num\}/g,a.length)),t.isFunction(n.group_callback)&&n.group_callback(o.find("td"),a,b,i))),n.group_saveGroups&&n.group_currentGroups[n.group_currentGroup].length?(r=o.find(".group-name").text().toLowerCase(),e=t.inArray(r,n.group_currentGroups[n.group_currentGroup])>-1,o.toggleClass("collapsed",e),a.toggleClass("group-hidden",e)):n.group_collapsed&&n.group_collapsible&&(o.addClass("collapsed"),a.addClass("group-hidden"))}),s.$table.trigger(n.group_complete),s.debug&&t.tablesorter.benchmark("Applying groups widget: ",d)}}},bindEvents:function(i,s,n){n.group_collapsible&&(n.group_currentGroups=[],s.$table.on("click toggleGroup","tr.group-header",function(r){r.stopPropagation();var o,a,l,h=t(this),c=h.find(".group-name").text().toLowerCase();"click"===r.type&&r.shiftKey&&h.siblings(".group-header").trigger("toggleGroup"),h.toggleClass("collapsed"),h.nextUntil("tr.group-header").toggleClass("group-hidden",h.hasClass("collapsed")),n.group_saveGroups&&e.storage&&(a=s.$table.find(".group-header"),o=h.hasClass("collapsed"),n.group_currentGroups[n.group_currentGroup]||(n.group_currentGroups[n.group_currentGroup]=[]),o&&n.group_currentGroup?n.group_currentGroups[n.group_currentGroup].push(c):n.group_currentGroup&&(l=t.inArray(c,n.group_currentGroups[n.group_currentGroup]),l>-1&&n.group_currentGroups[n.group_currentGroup].splice(l,1)),e.storage(i,"tablesorter-groups",n.group_currentGroups))})),t(n.group_saveReset).on("click",function(){e.grouping.clearSavedGroups(i)}),s.$table.on("pagerChange.tsgrouping",function(){e.grouping.update(i,s,n)})},clearSavedGroups:function(t){t&&e.storage&&(e.storage(t,"tablesorter-groups",""),e.grouping.update(t,t.config,t.config.widgetOptions))}},e.addWidget({id:"group",priority:100,options:{group_collapsible:!0,group_collapsed:!1,group_saveGroups:!0,group_saveReset:null,group_count:" ({num})",group_separator:"-",group_formatter:null,group_callback:null,group_complete:"groupingComplete",group_months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],group_week:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],group_time:["AM","PM"],group_dateString:function(t){return t.toLocaleString()}},init:function(t,i,s,n){e.grouping.bindEvents(t,s,n)},format:function(t,i,s){e.grouping.update(t,i,s)},remove:function(t,e){e.$table.off("click","tr.group-header").off("pagerChange.tsgrouping").find(".group-hidden").removeClass("group-hidden").end().find("tr.group-header").remove()}})}(jQuery);